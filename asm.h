#include <stdint.h>

#include <stdlib.h>
#include <stdio.h>

#include "lexer.h"
static char hdr_magic[] = {
    0x7f, 0x45, 0x4c, 0x46
};

static uint16_t hdr_start[] = {
    0x0102,
    0x01,
    0x00,
    0x00,
    0x00, 0x00,
    0x02,
    0x3e,
    0x01, 0x00,
    0x8054, 0x0804,
    0x34, 0x00,
    0x00, 0x00, 0x00, 0x00,
    0x34, 0x20, 0x01, 0x28, 0x00, 0x00,
    0x01, 0x00,
    0x54, 0x00, 0x8054, 0x0804,
    0x00, 0x00,
    0xCC, 0x00,
    0xCC, 0x00,
    0x05, 0x00,
    0x1000, 0x00,
};

static uint16_t hdr_minstr[] = {
    0x01b8, 0x04, // MOV ecx, 10
    0xbb00, 0x01, // MOV edx, 1
    0x00, 0x80cd,  // SYSCALL
    0x01b8, 0x00, // MOV eax, 0
    0xbb00, 0x01, // MOV ebx, 1
    0x00, 0x80cd  // Syscall
};

#define ELF_HDR_SIZE (0x40)

int MatchExpr(char *__e1, char *__e2);

int AssembleELF64(char *__file);
